angular.module("angular-lightweight-markdown-editor-templates",[]).run(["$templateCache",function(t){t.put("angular-lightweight-markdown-template.html",'<div class="markdown-editor"><ul class="markdown-editor__actions"><li ng-click="markdownEditorCtrl.action(\'bold\')"><i class="ame-bold"></i></li><li ng-click="markdownEditorCtrl.action(\'italic\')"><i class="ame-italic"></i></li><li ng-click="markdownEditorCtrl.action(\'strikethrough\')"><i class="ame-strikethrough"></i></li><li class="separator"></li><li ng-click="markdownEditorCtrl.action(\'heading\')"><i class="ame-header"></i></li><li ng-click="markdownEditorCtrl.action(\'bullets\')"><i class="ame-list-ul"></i></li><li ng-click="markdownEditorCtrl.action(\'indent\')"><i class="ame-indent"></i></li><li ng-click="markdownEditorCtrl.action(\'code\')"><i class="ame-code"></i></li><li class="separator"></li><li ng-click="markdownEditorCtrl.action(\'link\')"><i class="ame-link"></i></li><li ng-click="markdownEditorCtrl.action(\'quote\')"><i class="ame-quote-right"></i></li><li class="separator"></li><li ng-click="markdownEditorCtrl.preview = !markdownEditorCtrl.preview" ng-show="markdownEditorCtrl.showdownEnabled" ng-class="{enabled: markdownEditorCtrl.preview}" class="preview">{{markdownEditorCtrl.translations.textPreview}}</li></ul><div class="markdown-editor__editorarea"><div ng-class="{nopreview: !markdownEditorCtrl.preview}"><textarea ng-model="markdownEditorCtrl.ngModel"></textarea></div><div class="markdown-editor__editorarea__preview" ng-if="markdownEditorCtrl.showdownEnabled" ng-show="markdownEditorCtrl.preview" ng-bind-html="markdownEditorCtrl.getHTML()"></div></div></div>')}]),function(){function t(){return{restrict:"E",templateUrl:"angular-lightweight-markdown-template.html",controller:r,controllerAs:"markdownEditorCtrl",scope:!0,bindToController:{ngModel:"=",textPreview:"@",textProvideText:"@",textProvideLink:"@",showPreview:"="},require:["^form","ngModel"],link:function(t,i,r,n){e=i.find("textarea")[0];var o=(n[0],["name","required","minLength","maxLength","placeholder","selectionDirection","selectionStart","selectionEnd","spellcheck"]);angular.forEach(o,function(t){r[t]&&(e[t]=r[t])})}}}function r(t,i){this.preview=!1,"undefined"!=typeof this.showPreview&&(this.preview=this.showPreview),this.showdownEnabled="undefined"!=typeof showdown;for(var r in o)angular.isDefined(this[r])&&(o[r]=this[r]);this.translations=o,this.action=function(t){var i=l[t](this.ngModel,n());i!==!1&&(this.ngModel=i)},this.getHTML=function(){return this.showdownEnabled?t.trustAsHtml(i(a.makeHtml(this.ngModel))):""}}function n(){return{start:e.selectionStart,end:e.selectionEnd,length:e.selectionEnd-e.selectionStart}}r.$inject=["$sce","$sanitize"],angular.module("angular-lightweight-markdown-editor",["ngSanitize","angular-lightweight-markdown-editor-templates"]).directive("markdownEditor",t);var e,o={textPreview:"Preview",textProvideText:"Please provide link text",textProvideLink:"Please provide link URL"};if("undefined"!=typeof showdown)var a=new showdown.Converter;var l={bold:function(t,i){return s.surraund(t,i.start,i.end-i.start,"**","**")},italic:function(t,i){return s.surraund(t,i.start,i.end-i.start,"*","*")},bullets:function(t,i){return s.startLinesWith(t,i.start,i.end,"* ")},heading:function(t,i){return s.startLinesWith(t,i.start,i.end,"#")},strikethrough:function(t,i){return s.surraund(t,i.start,i.end-i.start,"--","--")},indent:function(t,i){return s.startLinesWith(t,i.start,i.end,"\t")},quote:function(t,i){return s.startLinesWith(t,i.start,i.end,"> ")},code:function(t,i){var r=t.substr(0,i.start).lastIndexOf("\n")+1,n=t.substr(i.end).indexOf("\n");if(n==-1)var e=t.length;else var e=i.end+n+1;return[t.substr(0,r),"```\n",t.substr(r,e-r),"\n```\n",t.substr(e)].join("")},link:function(t,i){if(i.length>0)var r=t.substr(i.start,i.length);else{var r=prompt(o.textProvideText);if(!r)return!1}var n=prompt(o.textProvideLink);return!!n&&[t.substr(0,i.start),"["+r+"]","("+n+")",t.substr(i.end)].join("")}},s={surraund:function(t,i,r,n,e){var o=t.substr(i,r);return[t.substr(0,i),n?n:"",o,e?e:"",t.substr(i+r)].join("")},startLinesWith:function(t,i,r,n){var e=s.indexes(t.substr(i,r-i),"\n",i),o=t.substr(0,i).lastIndexOf("\n")+1;t=[t.substr(0,o),n,t.substr(o)].join("");for(var a=0;a<e.length;a++)t=[t.substr(0,n.length*(a+1)+e[a]+1),n,t.substr(n.length*(a+1)+e[a]+1)].join("");return t},indexes:function(t,r,n){var e=[];for(i=0;i<t.length;++i)t.substring(i,i+r.length)==r&&e.push(i+n);return e}}}();
